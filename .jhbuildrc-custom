# -*- mode: python -*-

#checkoutroot = '/usr/local/src/gnome'
#prefix = '/usr/local/gtk'
if _osx_version.startswith("8."):
    os.environ["MACOSX_DEPLOYMENT_TARGET"] = "10.4"
    module_makeargs["gtk+"]="LDFLAGS='-framework AppKit -framework Carbon -framework CoreFoundation -framework ApplicationServices -lobjc'"
    module_makeargs["ige-mac-integration"]="LDFLAGS='-framework AppKit -lobjc'"
    module_makeargs["aqbanking"]="LDFLAGS='-liconv'"
   # setup_sdk_10_4()
    pass
else:
    os.environ["MACOSX_DEPLOYMENT_TARGET"] = "10.5"
    skip.append("bison")

autogenargs=autogenargs + ' --disable-xlib'
append_autogenargs("gconf", "--enable-static --enable-shared --disable-scrollkeeper --disable-xlib")
append_autogenargs("libofx", "--with-opensp-includes=" + prefix + "/include/OpenSP --with-opensp-libs=" + prefix + "/lib")
append_autogenargs("libgnomeui", "--disable-static --enable-shared --disable-scrollkeeper --disable-xlib --without-x")
append_autogenargs("scrollkeeper", "--with-xml-catalog=" + os.path.join(prefix, "etc/xml/catalog"))

append_autogenargs("gnucash-unstable", "--with-html-engine=webkit")
append_autogenargs("libdbi-drivers","--with-dbi-incdir=" + prefix + "/include --with-dbi-libdir=" + prefix + "/lib")
append_autogenargs("aqbanking-qt", 'qt3_libs="-framework QtCore -framework QtGui -framework Qt3Support" qt3_includes="-I/Library/Frameworks/QtCore.framework/Headers -I/Library/Frameworks/QtGui.framework/Headers -I/Library/Frameworks/Qt3Support.framework/Headers" QT3TO4=/usr/bin/qt3to4')

moduleset = os.environ["HOME"] + "/gnucash-on-osx/master/modulesets/gnucash.modules"
modules = ['meta-gtk-osx-bootstrap', 'meta-gtk-osx-core', 'meta-gtk-osx-freetype', 'gnucash']

#build_policy = "updated-deps"




